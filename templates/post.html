{% extends "base.html" %}
{% block content %}
{% load crispy_forms_tags %}
{% load cloudinary %}
<h1 class="display-1">Adventure: {{ adventure.name }}</h1>{{ adventure.author }} {{ user.username }}
<h2 class="display-1">Posts:</h2>
{% for post in posts %}
<div class="card  container-sm" style=" margin-top: 10px;">
  {% if "placeholder" in post.featured_image.url %}
  <img src="https://res.cloudinary.com/djs04srkx/image/upload/v1689779280/samples/balloons.jpg" width="100%">
  {% else %}
  <img src=" {{ post.featured_image.url }}" width="100%">
  {% endif %}
    <div class="card-body">
      <h5 class="card-title display-6">{{ post.title }}</h5>
      <p class="card-text">{{ post.content }}</p>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">{{ post.created_on }}</li>
      <li class="list-group-item">{{ post.author }}</li>
      <li class="list-group-item">{{ post.updated_on }}</li>
    </ul>
      <a href="{% url 'edit_post' post.id adventure.id user.id %}" class="card-link"><i class="fa-solid fa-pen"></i></a>
      <a href="{% url 'delete_post' post.id adventure.id user.id %}" class="card-link"><i class="fa-solid fa-trash"></i></a>
    </div>
  </div>
{% empty %}
        <tr><td>You have no Destinations planed.</td></tr>  
{% endfor %}
<h4>Comments: </h4>
{% for comment in comments %}
<div class="card container-fluid container-sm">
    <div class="card-body text-center">
        <figure>
            <blockquote class="blockquote">
            <p>{{ comment.body }}</p>
            </blockquote>
            <figcaption class="blockquote-footer">
            {{ comment.name}}
            </figcaption>
        </figure>
    </div>
</div>
{% endfor %}

<div class="d-flex justify-content-end justify-content-around" >
<a href="/add_comment/{{ adventure.id }}/{{ user.id }}" class="card-link"><button type="button" class="btn btn-success">Add Comment<i class="fa-solid fa-comments"></i></button></a>
</div>

<div id="addCommentModal">
<h3>Add a comment.</h3>
<p>Posting as: {{ user.username }}</p>
<form method="POST">
    {{ comment_form|crispy }}
    {% csrf_token %}
    <button type="submit" class="btn btn-success close">Add</button>
</form>
</div>
<button type="submit" class="btn btn-success" id="addPostBtn">Add Post</button>

<div id="addPostModal">
  <h3 class="display-1">Add Post</h3>
  <form method="POST" class="container" style="width: 50%;" enctype="multipart/form-data">
      {{ post_form|crispy }}
      {% csrf_token %}
      <button type="submit" class="btn btn-success close">Add</button>
  </form>
</div>

{% endblock %}